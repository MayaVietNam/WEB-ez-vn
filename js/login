document.addEventListener('DOMContentLoaded', () => {
  const partnerTab = document.getElementById('partner-tab');
  const corpTab    = document.getElementById('corp-tab');
  const partnerForm= document.getElementById('partner-form');
  const corpForm   = document.getElementById('corp-form');

  // Chuyển tab
  function switchTab(isPartner) {
    partnerForm.classList.toggle('hidden', !isPartner);
    corpForm.classList.toggle('hidden', isPartner);
    partnerTab.classList.toggle('active', isPartner);
    corpTab.classList.toggle('active', !isPartner);
    partnerTab.setAttribute('aria-selected', isPartner);
    corpTab.setAttribute('aria-selected', !isPartner);
  }
  partnerTab.addEventListener('click', () => switchTab(true));
  corpTab.addEventListener('click',    () => switchTab(false));

  // Xử lý login Đối tác (giữ nguyên logic cũ)
  partnerForm.addEventListener('submit', e => {
    e.preventDefault();
    const user = document.getElementById('partner-user').value.trim().toLowerCase();
    const pass = document.getElementById('partner-pass').value;
    // Ví dụ kiểm tra tĩnh
    if (user === 'his_user' && pass === 'MAYAVIETNAM') {
      window.location.href = './HIS/index.html';
    } else {
      Swal.fire('Lỗi', 'Tài khoản đối tác không đúng.', 'error');
    }
  });

  // Xử lý login Doanh nghiệp chỉ với Tax Code
  corpForm.addEventListener('submit', e => {
    e.preventDefault();
    const taxCode = document.getElementById('corp-tax-code').value.trim();
    if (!taxCode) {
      return Swal.fire('Thiếu thông tin', 'Vui lòng nhập Mã số thuế.', 'warning');
    }
    // Lưu Tax Code vào sessionStorage
    sessionStorage.setItem('corpTaxCode', taxCode);
    // Chuyển thẳng vào trang đăng ký bộ phát
    window.location.href = './Corporate/router.html';
  });
});
