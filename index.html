<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cổng Dịch Vụ Thuê Wifi - MayaVietNam</title>
    <link rel="icon" type="image/png" href="https://i.postimg.cc/VvSyGkBV/EZ-LOGO-08.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@400;500;700&display=swap');
        body { 
            font-family: 'Be Vietnam Pro', sans-serif;
            background-color: #f0f4f8;
        }
        .glass-container {
            background: rgba(255, 255, 255, 0.6);
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
        }
        .bg-logo-bg { position: fixed; z-index: -1; left: 0; top: 0; width: 100vw; height: 100vh; overflow: hidden; }
        .bg-logo-bg-inner { position: absolute; left: 50%; top: 50%; width: 200vw; height: 200vh; transform: translate(-50%, -50%) rotate(-10deg); background-image: url('https://i.postimg.cc/yd4v4YHG/EZ-LOGO-31.png'); background-repeat: repeat; background-size: 120px auto; opacity: 0.05; }
        .tab-button { transition: all 0.3s ease; }
        .tab-button.active { border-color: #ef4444; color: #ef4444; font-weight: 700; }
    </style>
</head>
<body class="antialiased">
    <div class="bg-logo-bg"><div class="bg-logo-bg-inner"></div></div>
    <div class="min-h-screen flex flex-col sm:flex-row">
        <!-- Mascot Section -->
        <div class="w-full sm:w-1/2 flex items-center justify-center p-8 bg-gradient-to-br from-red-50 to-blue-100">
            <div class="text-center">
                <img src="https://i.postimg.cc/Qd911d3y/EZ-MASCOT-13.png" alt="Linh vật EZ Wifi" class="max-w-xs sm:max-w-sm mx-auto">
                <h1 class="text-3xl sm:text-4xl font-bold text-gray-800 mt-6">Kết nối không giới hạn</h1>
                <p class="text-gray-600 mt-2">Dịch vụ Wifi du lịch hàng đầu Việt Nam</p>
            </div>
        </div>

        <!-- Login Section -->
        <div class="w-full sm:w-1/2 flex items-center justify-center p-6">
            <div class="w-full max-w-md">
                 <div class="text-center mb-8">
                    <img src="https://i.postimg.cc/VvSyGkBV/EZ-LOGO-08.png" alt="EZ Maya Logo" class="h-14 w-auto mx-auto">
                 </div>
                <div class="glass-container rounded-2xl p-8 shadow-2xl">
                    <!-- Tabs -->
                    <div class="flex border-b border-gray-300 mb-6">
                        <button id="partner-tab" class="tab-button active w-1/2 py-3 text-center font-semibold text-gray-500 border-b-4 border-transparent">Đối Tác</button>
                        <button id="corp-tab" class="tab-button w-1/2 py-3 text-center font-semibold text-gray-500 border-b-4 border-transparent">Doanh Nghiệp</button>
                    </div>

                    <!-- Partner Form -->
                    <form id="partner-form" class="space-y-6">
                        <input type="text" id="partner-user" placeholder="Tài khoản đối tác" class="w-full px-4 py-3 border border-gray-300 rounded-lg bg-white/70 focus:ring-2 focus:ring-indigo-500 transition">
                        <input type="password" id="partner-pass" placeholder="Mật khẩu" class="w-full px-4 py-3 border border-gray-300 rounded-lg bg-white/70 focus:ring-2 focus:ring-indigo-500 transition">
                        <button type="submit" class="w-full bg-red-600 hover:bg-red-700 text-white font-bold py-3 rounded-lg shadow-lg transition-transform transform hover:scale-105">Đăng Nhập</button>
                    </form>

                    <!-- Corporate Form -->
                    <form id="corp-form" class="space-y-6 hidden">
                        <input type="text" id="corp-user" placeholder="Mã số thuế" class="w-full px-4 py-3 border border-gray-300 rounded-lg bg-white/70 focus:ring-2 focus:ring-indigo-500 transition">
                        <input type="password" id="corp-pass" placeholder="Mật khẩu" class="w-full px-4 py-3 border border-gray-300 rounded-lg bg-white/70 focus:ring-2 focus:ring-indigo-500 transition">
                        <button type="submit" class="w-full bg-red-600 hover:bg-red-700 text-white font-bold py-3 rounded-lg shadow-lg transition-transform transform hover:scale-105">Đăng Nhập</button>
                    </form>
                    
                    <div id="corp-register-link" class="text-center mt-6 hidden">
                        <p class="text-sm text-gray-600">Chưa có tài khoản? <a href="./Corporate/index.html" class="font-semibold text-indigo-600 hover:underline">Đăng ký tại đây</a></p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbwqKgCKJune5u9ezFieKBaTY-P78jOiWExBBgLB7SD-0Yr5svIUn3gsGs-DVHsNvnuf/exec';

        const partnerAccounts = {
            'his_user': { path: './HIS/index.html' },
            'toyota_user': { path: './TOYOTA/index.html' },
            'yamaha_user': { path: './YAMAHA/index.html' }
        };
        const partnerPassword = "MAYAVIETNAM";

        const partnerTab = document.getElementById('partner-tab');
        const corpTab = document.getElementById('corp-tab');
        const partnerForm = document.getElementById('partner-form');
        const corpForm = document.getElementById('corp-form');
        const corpRegisterLink = document.getElementById('corp-register-link');

        function switchTab(activeTab) {
            if (activeTab === 'partner') {
                partnerTab.classList.add('active');
                corpTab.classList.remove('active');
                partnerForm.classList.remove('hidden');
                corpForm.classList.add('hidden');
                corpRegisterLink.classList.add('hidden');
            } else {
                corpTab.classList.add('active');
                partnerTab.classList.remove('active');
                corpForm.classList.remove('hidden');
                partnerForm.classList.add('hidden');
                corpRegisterLink.classList.remove('hidden');
            }
        }

        partnerTab.addEventListener('click', () => switchTab('partner'));
        corpTab.addEventListener('click', () => switchTab('corp'));

        partnerForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const user = document.getElementById('partner-user').value.trim().toLowerCase();
            const pass = document.getElementById('partner-pass').value;
            if (partnerAccounts[user] && pass === partnerPassword) {
                window.location.href = partnerAccounts[user].path;
            } else {
                Swal.fire('Lỗi', 'Tài khoản hoặc mật khẩu đối tác không chính xác.', 'error');
            }
        });

        corpForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const taxCode = document.getElementById('corp-user').value.trim();
            const password = document.getElementById('corp-pass').value;
            if (!taxCode || !password) {
                Swal.fire('Thiếu thông tin', 'Vui lòng nhập Mã số thuế và Mật khẩu.', 'warning');
                return;
            }
            Swal.fire({ title: 'Đang đăng nhập...', didOpen: () => Swal.showLoading(), allowOutsideClick: false });
            try {
                const response = await fetch(`${SCRIPT_URL}?action=login&taxCode=${taxCode}&password=${encodeURIComponent(password)}`);
                const result = await response.json();
                if (result.result === 'success' && result.isValid) {
                    Swal.close();
                    window.location.href = `./Corporate/order.html?taxCode=${taxCode}`;
                } else {
                    throw new Error(result.error || 'Tài khoản hoặc mật khẩu không chính xác.');
                }
            } catch (error) {
                Swal.fire('Lỗi', error.message, 'error');
            }
        });
    </script>
</body>
</html>

